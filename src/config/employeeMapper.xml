<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper 
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="employeeMapper">

	<!-- 로그인 -->
    <select id="loginCheck" parameterType="java.util.Map" resultType="com.oopsw.model.EmployeeVO">
        SELECT 
            employee_id AS employeeId,
            name, 
            position, 
            work_status AS workStatus
        FROM employees
        WHERE 
            employee_id = #{employeeId}
            AND password = #{password}
            AND resign_date IS NULL
    </select>
    
    <!-- 로그인 시 상태변경(출근) -->
    <update id="goWorkStatus" parameterType="String">
    	UPDATE employees SET 
    		work_status = '출근' 
		WHERE employee_id = #{employeeId}
    </update>
    
    <!-- 마이페이지 비밀번호 변경 -->
    <update id="updatePassword" parameterType="java.util.Map">
    	UPDATE employees SET 
    		password = #{newPassword}, 
			up_date  = SYSDATE 
		WHERE employee_id = #{employeeId}
    </update>

</mapper>