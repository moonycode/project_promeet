<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper 
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="employeeMapper">

    <select id="loginCheck" parameterType="java.util.Map" resultType="com.oopsw.model.EmployeeVO">
        SELECT 
            employee_id AS employeeId,
            name, 
            position, 
            work_status AS workStatus
        FROM employees
        WHERE 
            employee_id = #{employeeId}
            AND password = #{password}
            AND resign_date IS NULL
    </select>
    

    <update id="goWorkStatus" parameterType="String">
    	UPDATE employees SET 
    		work_status = '출근' 
		WHERE employee_id = #{employeeId}
    </update>
    
    
    <select id="getEmployeeInfo" parameterType="java.util.Map" resultType="com.oopsw.model.EmployeeVO">
    	SELECT
    		employee_id AS employeeId,
    		position,
    		phone_number AS phoneNumber,
    		email,
    		project_creator_flag AS projectCreatorFlag,
    		password
    	FROM employees
    	WHERE
    		employee_id = #{employeeId}    		
    </select>

    <update id="updatePassword" parameterType="java.util.Map">
    	UPDATE employees SET 
    		password = #{newPassword}, 
			up_date  = SYSDATE 
		WHERE employee_id = #{employeeId} and password=#{currentPassword}
    </update>

</mapper>